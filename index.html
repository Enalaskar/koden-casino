<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>koden</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-[#0F0F12] text-white font-sans h-screen flex flex-col overflow-hidden p-4 gap-4">

    <div id="changelog-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="toggleChangelog()"></div>
    
    <div class="relative bg-[#141417] border border-[#1f1f21] w-full max-w-md rounded-3xl overflow-hidden shadow-2xl transform transition-all scale-100">
        <div class="bg-[#8b5cf6] p-6 text-white">
            <h3 class="text-2xl font-black italic uppercase tracking-tighter">Derni√®re Mise √† Jour</h3>
            <p class="text-[10px] opacity-70 font-bold uppercase tracking-widest">Version 1.5 - Koden System</p>
        </div>
        
        <div class="p-6 space-y-4">
            <ul class="space-y-3">
                <li class="flex items-start gap-3">
                    <span class="text-[#8b5cf6] mt-1">‚óè</span>
                    <p class="text-xs text-zinc-400 font-medium">Nouveau jeux! Le <span class="text-white font-bold">Roulette</span>.</p>
                    <a class="text-xs text-zinc-400 font-medium" href="roulette.html">CLIQUER POUR TESTER!</a>
                </li>
                <li class="flex items-start gap-3">
                    <span class="text-[#8b5cf6] mt-1">‚óè</span>
                    <p class="text-xs text-zinc-400 font-medium">Nouvelle fonctionnalit√©! le CHAT (avec des commandes comme /tip et un systeme auto de detection des gros gains)</p>
                </li>
                <li class="flex items-start gap-3">
                    <span class="text-[#8b5cf6] mt-1">‚óè</span>
                    <p class="text-xs text-zinc-400 font-medium">Corrections des bugs du site.</span>.</p>
                </li>
            </ul>
            
            <button onclick="toggleChangelog()" class="w-full py-4 bg-[#1f1f21] hover:bg-[#2a2a2d] text-zinc-400 hover:text-white rounded-xl text-xs font-black uppercase transition-all mt-4 border border-white/5">
                Fermer
            </button>
        </div>
    </div>
</div>

    <nav class="h-16 bg-[#141417] border border-[#1f1f21] rounded-2xl flex items-center justify-between px-6 shrink-0 shadow-xl relative">
    <div class="flex items-center gap-6">
        <a href="index.html" class="flex items-center gap-2 group">
            <div class="w-1 h-5 bg-[#8b5cf6] rounded-full group-hover:bg-[#fbbf24] transition-colors"></div>
            <span class="text-xl font-black italic tracking-tighter uppercase">Koden</span>
        </a>
        <button onclick="toggleChangelog()" class="h-10 px-4 bg-[#8b5cf6] hover:bg-[#7c3aed] text-white rounded-xl flex items-center gap-2 transition-all active:scale-95 shadow-[0_0_15px_rgba(139,92,246,0.3)]">
            <span class="text-xs font-black uppercase tracking-tighter italic">Update</span>
            <div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>
        </button>
    </div>

    <div class="flex items-center gap-4">
        
        <div class="mt-4">
    <button id="daily-btn" onclick="claimDaily()" class="w-full bg-[#22c55e]/10 border border-[#22c55e]/20 text-[#22c55e] font-black py-4 rounded-2xl uppercase italic text-[10px] hover:bg-[#22c55e] hover:text-black transition-all group relative overflow-hidden disabled:opacity-30 disabled:grayscale disabled:cursor-not-allowed">
        <span class="relative z-10">R√©compense Journali√®re</span>
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:animate-shimmer"></div>
    </button>
    <p id="daily-timer" class="text-[8px] text-zinc-600 font-bold uppercase tracking-widest text-center mt-2"></p>
</div>

        <div class="flex items-center gap-3 bg-[#0F0F12] border border-yellow-500/30 px-4 py-1.5 rounded-xl">
            <img src="coin.png" class="w-4 h-4 animate-pulse" alt="coin">
            <span class="text-[13px] font-mono font-bold text-[#fbbf24] balance-display">0.00</span>
        </div>

        <div class="relative">
    <button onclick="toggleProfileCard()" class="flex items-center gap-3 bg-[#141417]/50 hover:bg-[#1c1c21] border border-white/5 p-1.5 pr-4 rounded-xl transition-all duration-300 group relative">
    
    <div id="user-pp-container" class="w-10 h-10 rounded-lg bg-[#0F0F12] border border-white/10 flex items-center justify-center overflow-hidden shrink-0 group-hover:border-[#8b5cf6]/50 transition-colors">
        <img id="display-pp" src="" class="w-full h-full object-cover hidden" alt="pp">
        <span id="display-emoji" class="text-base opacity-50">üë§</span>
    </div>

    <div class="flex flex-col items-start leading-none gap-1">
        <div class="flex items-center gap-1.5">
            <span id="nav-username" class="text-[11px] font-black uppercase tracking-wider text-white/90">User</span>
            <div class="w-1.5 h-1.5 rounded-full bg-[#22c55e] shadow-[0_0_8px_#22c55e]"></div>
        </div>
        <span class="text-[7px] text-zinc-500 font-bold uppercase tracking-[0.2em]">Session_Active</span>
    </div>

    <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 text-zinc-600 group-hover:text-white transition-colors ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7" />
    </svg>
</button>

    <div id="profile-card" class="hidden absolute top-16 right-0 w-72 bg-[#141417] border-2 border-[#1f1f21] rounded-2xl p-6 shadow-[0_20px_50px_rgba(0,0,0,0.8)] z-[100] animate-fadeIn">
    <div class="flex flex-col gap-5">
        <div class="text-center border-b border-[#1f1f21] pb-4">
            <p class="text-[10px] font-black text-zinc-500 uppercase tracking-[0.3em]">User_Terminal</p>
        </div>
        
        <div class="space-y-2">
            <button onclick="changePP()" class="w-full bg-[#8b5cf6]/10 border border-[#8b5cf6]/20 text-[#8b5cf6] font-black py-3 rounded-xl uppercase italic text-[10px] hover:bg-[#8b5cf6] hover:text-white transition-all mb-2">
                Modifier la Photo (URL)
            </button>

            <button onclick="logout()" class="w-full bg-[#1c1c21] border border-zinc-800 text-zinc-300 font-black py-3 rounded-xl uppercase italic text-[10px] hover:bg-white/5 transition-all">
                Se D√©connecter
            </button>

            <button onclick="deleteAccount()" class="w-full bg-[#ef4444]/5 border border-[#ef4444]/20 text-[#ef4444] font-black py-3 rounded-xl uppercase italic text-[10px] hover:bg-[#ef4444] hover:text-white transition-all">
                Supprimer le compte
            </button>
        </div>
    </div>
</div>
</div>
    </div>
</nav>

    <div class="flex-1 flex gap-4 overflow-hidden mb-2">
        
        <aside class="w-[55%] bg-[#141417] border border-[#1f1f21] rounded-3xl p-6 overflow-y-auto custom-scroll shadow-2xl">
    <div class="mb-6 flex items-center gap-4">
        <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-zinc-500 italic">Jeux</h2>
        <div class="h-px flex-1 bg-[#1f1f21]/50"></div>
    </div>
        
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 p-2 w-full">

        <a href="chicken.html" class="group bg-[#0F0F12] border border-[#1f1f21] rounded-2xl overflow-hidden hover:border-[#8b5cf6]/50 transition-all duration-300 flex flex-col w-full">
            <div class="relative aspect-square overflow-hidden border-b border-[#1f1f21]">
                <div class="absolute inset-0 bg-[url('le_poulet.png')] bg-cover bg-center opacity-40 group-hover:scale-110 transition-transform duration-700"></div>
                <div class="absolute top-2 left-2">
                    <span class="px-1.5 py-0.5 bg-[#22c55e] text-black text-[7px] font-black uppercase rounded animate-pulse">Live</span>
                </div>
            </div>
            <div class="p-3 bg-[#141417]/30">
                <h3 class="text-sm font-black italic uppercase group-hover:text-[#a78bfa] transition-colors leading-none mb-1">Chicken</h3>
                <p class="text-zinc-500 text-[7px] uppercase font-bold opacity-70">Poulet ou os?</p>
            </div>
        </a>

        <a href="blackjack.html" class="group bg-[#0F0F12] border border-[#1f1f21] rounded-2xl overflow-hidden hover:border-[#8b5cf6]/50 transition-all duration-300 flex flex-col w-full">
            <div class="relative aspect-square overflow-hidden border-b border-[#1f1f21]">
                <div class="absolute inset-0 bg-[url('cartes.gif')] bg-cover bg-center opacity-40 group-hover:scale-110 transition-transform duration-700"></div>
                <div class="absolute top-2 left-2">
                    <span class="px-1.5 py-0.5 bg-[#22c55e] text-black text-[7px] font-black uppercase rounded animate-pulse">Live</span>
                </div>
            </div>
            <div class="p-3 bg-[#141417]/30">
                <h3 class="text-sm font-black italic uppercase group-hover:text-[#a78bfa] transition-colors leading-none mb-1">blackjack</h3>
                <p class="text-zinc-500 text-[7px] uppercase font-bold opacity-70">Top des jeux de cartes dans les casinos!</p>
            </div>
        </a>

        <a href="crash.html" class="group bg-[#0F0F12] border border-[#1f1f21] rounded-2xl overflow-hidden hover:border-[#8b5cf6]/50 transition-all duration-300 flex flex-col w-full">
            <div class="relative aspect-square overflow-hidden border-b border-[#1f1f21]">
                <div class="absolute inset-0 bg-[url('1ed319fe2285213d78813214ee4837bb.gif')] bg-cover bg-center opacity-60 group-hover:scale-110 transition-transform duration-700"></div>
                <div class="absolute top-2 left-2">
                    <span class="px-1.5 py-0.5 bg-[#22c55e] text-black text-[7px] font-black uppercase rounded animate-pulse">Live</span>
                </div>
            </div>
            <div class="p-3 bg-[#141417]/30">
                <h3 class="text-sm font-black italic uppercase group-hover:text-[#a78bfa] transition-colors leading-none mb-1">Rocket space</h3>
                <p class="text-zinc-500 text-[7px] uppercase font-bold opacity-70">Retirez le cash!</p>
            </div>
        </a>

        <a href="roulette.html" class="group bg-[#0F0F12] border border-[#1f1f21] rounded-2xl overflow-hidden hover:border-[#8b5cf6]/50 transition-all duration-300 flex flex-col w-full">
            <div class="relative aspect-square overflow-hidden border-b border-[#1f1f21]">
                <div class="absolute inset-0 bg-[url('roulette.gif')] bg-cover bg-center opacity-60 group-hover:scale-110 transition-transform duration-700"></div>
                <div class="absolute top-2 left-2">
                    <span class="px-1.5 py-0.5 bg-[#22c55e] text-black text-[7px] font-black uppercase rounded animate-pulse">Live</span>
                </div>
            </div>
            <div class="p-3 bg-[#141417]/30">
                <h3 class="text-sm font-black italic uppercase group-hover:text-[#a78bfa] transition-colors leading-none mb-1">Roulette</h3>
                <p class="text-zinc-500 text-[7px] uppercase font-bold opacity-70">multijoueur!</p>
            </div>
        </a>

    </div>
</aside>

        <div class="w-[45%] flex flex-col gap-4">
            <div class="bg-[#141417] border border-[#1f1f21] rounded-3xl p-6 shadow-2xl shrink-0">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-[10px] font-black uppercase tracking-[0.4em] text-zinc-500 italic">user panel</h2>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-[#0F0F12] border border-[#1f1f21] p-5 rounded-2xl flex flex-col">
                        <span class="text-[8px] text-zinc-600 uppercase font-black mb-1">PROFIT</span>
                        <span id="stat-total-profit" class="text-2xl font-mono font-bold text-[#22c55e] tracking-tighter">+0.0000</span>
                    </div>
                    <div class="bg-[#0F0F12] border border-[#1f1f21] p-5 rounded-2xl flex flex-col justify-center">
                        <div class="flex flex-col gap-1">
    <span class="text-[8px] font-black text-zinc-600 uppercase tracking-widest">RANK</span>
    <div class="flex items-center gap-3">
        <span id="user-rank" class="text-xl font-black italic tracking-tighter transition-all duration-500">BRONZE</span>

        <div class="relative group/rank">
            <span class="cursor-help w-3.5 h-3.5 rounded-md border border-zinc-800 flex items-center justify-center text-[9px] text-zinc-600 font-bold hover:bg-white/5 hover:text-white transition-all italic">i</span>
            
            <div class="absolute left-full ml-3 top-1/2 -translate-y-1/2 w-40 bg-[#0F0F12] border border-[#1f1f21] p-3 rounded-xl opacity-0 invisible group-hover/rank:opacity-100 group-hover/rank:visible transition-all z-[100] shadow-[0_10px_40px_rgba(0,0,0,0.8)]">
                <p class="text-[7px] font-black text-zinc-500 uppercase tracking-widest mb-2 border-b border-zinc-800 pb-1">Rank_Levels</p>
                <ul class="space-y-1.5">
                    <li class="flex justify-between text-[9px] font-bold"><span style="color: #cc1e1e">CHAMPION</span> <span class="text-zinc-600">100+</span></li>
                    <li class="flex justify-between text-[9px] font-bold"><span style="color: #7760fa">DIAMOND</span> <span class="text-zinc-600">75+</span></li>
                    <li class="flex justify-between text-[9px] font-bold"><span style="color: #34d399">PLATINUM</span> <span class="text-zinc-600">50+</span></li>
                    <li class="flex justify-between text-[9px] font-bold"><span style="color: #fbbf24">GOLD</span> <span class="text-zinc-600">25+</span></li>
                    <li class="flex justify-between text-[9px] font-bold"><span style="color: #a0a0a0">SILVER</span> <span class="text-zinc-600">10+</span></li>
                    <li class="flex justify-between text-[9px] font-bold"><span style="color: #803f19">BRONZE</span> <span class="text-zinc-600">10-</span></li>
                </ul>
            </div>
        </div>
    </div>
</div>
                    </div>
                    <div class="bg-[#0F0F12] border border-[#1f1f21] p-4 rounded-2xl">
                        <span class="text-[8px] text-zinc-600 uppercase font-black block mb-1">Win Rate</span>
                        <span id="stat-win-rate" class="text-lg font-mono font-bold">0%</span>
                    </div>
                    <div class="bg-[#0F0F12] border border-[#1f1f21] p-4 rounded-2xl">
                        <span class="text-[8px] text-zinc-600 uppercase font-black block mb-1">rounds</span>
                        <span id="stat-total-rounds" class="text-lg font-mono font-bold">0</span>
                    </div>
                </div>
            </div>

            <div class="bg-[#141417] border border-[#1f1f21] rounded-3xl p-6 flex flex-col gap-4 flex-grow min-h-[400px]">
                <div class="flex items-center gap-2 mb-2">
                    <h2 class="text-[10px] font-black uppercase tracking-[0.3em] text-zinc-500 italic">Leaderboard</h2>
                </div>
                <div id="leaderboard-container" class="flex flex-col gap-2 overflow-y-auto">
                </div>
            </div>
        </div> </div> 
        
        <footer class="h-10 bg-[#141417] border border-[#1f1f21] rounded-xl shrink-0 flex items-center justify-between px-6 text-[9px] font-mono shadow-lg mx-2 mb-2">
        <div class="flex items-center gap-6">
            <div class="flex items-center gap-2">
                <span class="text-[#22c55e] font-bold animate-pulse">‚óè SYSTEM_STABLE</span>
                <span class="text-zinc-700">|</span>
                <span class="text-zinc-500">59.2 FPS</span>
            </div>
            <div class="hidden xl:flex items-center gap-6 border-l border-[#1f1f21] pl-6">
                <span class="text-zinc-600 uppercase tracking-widest">Koden_Coin: <span class="text-[#fbbf24]">10</span> <span class="text-zinc-700">=</span> <span class="text-[#22c55e]">1$</span></span></span>
                <span class="text-zinc-600 uppercase tracking-widest">Uptime: <span class="text-[#22c55e]">99.9%</span></span>
            </div>
        </div>
        <div class="flex gap-4 items-center">
            <span class="text-zinc-700 font-black italic tracking-[0.2em] hidden md:block uppercase">Koden_Session</span>
            <div class="flex gap-3 text-zinc-500 uppercase font-bold">
                <a href="#" class="hover:text-[#a78bfa]">X</a>
                <a href="#" class="hover:text-[#a78bfa]">Discord</a>
            </div>
        </div>
    </footer>

<div id="tip-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-[1000] flex items-center justify-center p-4">
    <div class="bg-[#141417] border border-[#1f1f21] w-full max-w-sm rounded-3xl p-8 shadow-2xl animate-fadeIn">
        <h3 class="text-lg font-black italic uppercase mb-1">Envoyer un Tip</h3>
        <p id="tip-target-name" class="text-[10px] text-[#8b5cf6] font-bold uppercase tracking-widest mb-6">DESTINATAIRE: USER</p>
        
        <input type="number" id="tip-amount-input" placeholder="0.00" class="w-full bg-[#0F0F12] border border-[#1f1f21] rounded-xl p-4 text-white font-mono font-bold mb-6 outline-none focus:border-[#8b5cf6] transition-all">
        
        <div class="flex gap-3">
            <button onclick="closeTipModal()" class="flex-1 bg-zinc-900 text-zinc-500 font-bold py-3 rounded-xl uppercase text-[10px] hover:bg-zinc-800 transition-all">Annuler</button>
            <button onclick="confirmTip()" class="flex-1 bg-[#8b5cf6] text-black font-black py-3 rounded-xl uppercase italic text-[10px] hover:brightness-110 transition-all shadow-[0_0_20px_rgba(139,92,246,0.3)]">Confirmer</button>
        </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  // ON AJOUTE getDocs ICI :
  import { 
    getFirestore, doc, getDoc, updateDoc, increment, setDoc, deleteDoc, collection, 
    query, orderBy, limit, onSnapshot, addDoc, serverTimestamp, getDocs, 
    where // <--- AJOUTE √áA ICI
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
  const firebaseConfig = {
    apiKey: "AIzaSyBzucz2akqXT-LQ5ENHqz3U2yaJciJmM04",
    authDomain: "koden-casino.firebaseapp.com",
    projectId: "koden-casino",
    storageBucket: "koden-casino.firebasestorage.app",
    messagingSenderId: "730117054841",
    appId: "1:730117054841:web:e34b5b14fd825d9ce2cfa8",
    measurementId: "G-8BDP8RLVB3"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.db_online = db;
  // ON AJOUTE getDocs ICI AUSSI :
  window.fs = { 
    doc, getDoc, updateDoc, increment, setDoc, deleteDoc, collection,
    query, orderBy, limit, onSnapshot, addDoc, getDocs, where,
    // On force l'ex√©cution de la fonction ici
    serverTimestamp: () => serverTimestamp() 
  };
  
  console.log("Firebase Index: Syst√®me pr√™t !");
</script>

    <div id="notification-container" class="fixed top-6 left-1/2 -translate-x-1/2 z-[9999] flex flex-col gap-2 pointer-events-none"></div>
    <script src="script.js"></script>

    <div id="global-chat" class="fixed top-0 right-0 h-full w-[450px] bg-[#141417] border-l border-[#1f1f21] z-[150] translate-x-[100%] transition-transform duration-300 shadow-[-30px_0_60px_rgba(0,0,0,0.6)] flex flex-col">
        
    <button onclick="toggleChat()" class="absolute top-1/2 -left-10 w-10 h-24 bg-[#8b5cf6] rounded-l-2xl flex items-center justify-center transform -translate-y-1/2 hover:bg-[#7c3aed] transition-all group">
        <span class="rotate-90 text-[10px] font-black uppercase tracking-widest text-white whitespace-nowrap group-hover:scale-110 transition-transform">Chat</span>
    </button>

    <div class="p-6 bg-[#1a1a1e] border-b border-white/5 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="w-2 h-2 bg-[#22c55e] rounded-full animate-pulse"></div>
            <h3 class="text-sm font-black italic uppercase tracking-tighter">Chat</h3>
        </div>
        <button onclick="toggleChat()" class="text-zinc-600 hover:text-white text-xs">‚úï</button>
    </div>

    <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 custom-scroll font-sans text-[11px]">
        <div class="text-center py-4 text-zinc-700 uppercase tracking-widest text-[8px] font-bold opacity-50">Bienvenue dans le salon Koden</div>
    </div>

    <div class="p-4 bg-[#1a1a1e] border-t border-white/5">
        <form id="chat-form" onsubmit="sendChatMessage(event)" class="flex gap-2">
            <input id="chat-input" type="text" placeholder="√âcris ici..." 
                class="flex-1 bg-[#0F0F12] border border-white/5 rounded-xl px-4 py-2 text-xs outline-none focus:border-[#8b5cf6]/50 transition-all text-white">
            <button type="submit" class="bg-[#8b5cf6] px-3 rounded-xl hover:bg-[#7c3aed] transition-all active:scale-90">
                <span class="text-xs">‚ûú</span>
            </button>
        </form>
    </div>
</div>

</body>
</html>